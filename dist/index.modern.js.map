{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { useEffect } from \"react\";\n//import PropTypes from \"prop-types\";\nconst fontUrl = \"https://country-flag.proca.app/font/TwemojiCountryFlags.woff2\";\nconst fontName = \"countryFlags\";\nconst className = \"country-flag\";\nlet hasEffectRun = false;\n\nconst nativeFlag = () => {\n  const userAgent = window.navigator.userAgent;\n  return userAgent.indexOf(\"Win\") === -1;\n};\n\nexport function useCountryFlag(options) {\n  const cn = options?.className || className;\n  useEffect(() => {\n    if (hasEffectRun) {\n      // Run the effect logic only once\n      return;\n    }\n\n    hasEffectRun = true;\n    const css = `.${cn} {font-family: \"${fontName}\"}`;\n\n    const loadFont = async () => {\n      const customFont = new FontFace(fontName, \"url(\" + fontUrl + \")\", {\n        unicodeRange:\n          \"U+1F1E6-1F1FF, U+1F3F4, U+E0062-E0063, U+E0065, U+E0067, U+E006C, U+E006E, U+E0073-E0074, U+E0077, U+E007F\",\n      });\n\n      try {\n        await customFont.load();\n        document.fonts.add(customFont);\n      } catch {\n        console.log(\"can't load font\");\n      }\n    };\n\n    if (nativeFlag()) return;\n\n    loadFont();\n    const style = document.createElement(\"style\");\n    style.textContent = css;\n    style.id = \"react-emoji-flag\";\n    document.head.appendChild(style);\n  }, [cn]);\n}\n\nexport const flag = (isoCode) => {\n  const offset = 127397;\n  if (!isoCode || isoCode.toUpperCase() === \"ZZ\") return \"\";\n  return isoCode\n    .toUpperCase()\n    .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + offset));\n  // U+1F6A9\n};\n\nexport const CountryFlag = (props) => {\n  const cn = props?.className || className;\n  useCountryFlag({ className: cn }); // load the font and create style if needed\n  return (\n    <span className={cn} title={props.title || props.countryCode}>\n      {flag(props.countryCode)}\n    </span>\n  );\n};\n\n/*\nCountryFlag.propTypes = {\n  title: PropTypes.node,\n  countryCode: PropTypes.node,\n  className: PropTypes.node,\n};\n*/\n\nexport default CountryFlag;\n"],"names":["fontUrl","fontName","className","hasEffectRun","nativeFlag","userAgent","window","navigator","indexOf","useCountryFlag","options","cn","useEffect","css","loadFont","customFont","FontFace","unicodeRange","load","document","fonts","add","_unused","console","log","style","createElement","textContent","id","head","appendChild","flag","isoCode","offset","toUpperCase","replace","char","String","fromCodePoint","charCodeAt","CountryFlag","props","React","title","countryCode"],"mappings":"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"}