{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import React, { useEffect } from \"react\";\n//import PropTypes from \"prop-types\";\nconst fontUrl = \"https://country-flag.proca.app/font/TwemojiCountryFlags.woff2\";\nconst fontName = \"countryFlags\";\nconst className = \"country-flag\";\nlet hasEffectRun = false;\n\nconst nativeFlag = () => {\n  const userAgent = window.navigator.userAgent;\n  return userAgent.indexOf(\"Win\") === -1;\n};\n\nexport function useCountryFlag(options) {\n  const cn = options?.className || className;\n  useEffect(() => {\n    if (hasEffectRun) {\n      // Run the effect logic only once\n      return;\n    }\n\n    hasEffectRun = true;\n    const css = `.${cn} {font-family: \"${fontName}\"}`;\n\n    const loadFont = async () => {\n      const customFont = new FontFace(fontName, \"url(\" + fontUrl + \")\", {\n        unicodeRange:\n          \"U+1F1E6-1F1FF, U+1F3F4, U+E0062-E0063, U+E0065, U+E0067, U+E006C, U+E006E, U+E0073-E0074, U+E0077, U+E007F\",\n      });\n\n      try {\n        await customFont.load();\n        document.fonts.add(customFont);\n      } catch {\n        console.log(\"can't load font\");\n      }\n    };\n\n    if (nativeFlag()) return;\n\n    loadFont();\n    const style = document.createElement(\"style\");\n    style.textContent = css;\n    style.id = \"react-emoji-flag\";\n    document.head.appendChild(style);\n  }, [cn]);\n}\n\nexport const flag = (isoCode) => {\n  const offset = 127397;\n  if (!isoCode || isoCode.toUpperCase() === \"ZZ\") return \"\";\n  return isoCode\n    .toUpperCase()\n    .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + offset));\n  // U+1F6A9\n};\n\nexport const CountryFlag = (props) => {\n  const cn = props?.className || className;\n  useCountryFlag({ className: cn }); // load the font and create style if needed\n  return (\n    <span className={cn} title={props.title || props.countryCode}>\n      {flag(props.countryCode)}\n    </span>\n  );\n};\n\n/*\nCountryFlag.propTypes = {\n  title: PropTypes.node,\n  countryCode: PropTypes.node,\n  className: PropTypes.node,\n};\n*/\n\nexport default CountryFlag;\n"],"names":["_catch","body","recover","result","e","then","fontUrl","fontName","className","hasEffectRun","nativeFlag","userAgent","window","navigator","indexOf","useCountryFlag","options","cn","useEffect","css","loadFont","customFont","FontFace","unicodeRange","_temp","Promise","resolve","load","document","fonts","add","console","log","reject","style","createElement","textContent","id","head","appendChild","flag","isoCode","offset","toUpperCase","replace","char","String","fromCodePoint","charCodeAt","CountryFlag","props","React","title","countryCode"],"mappings":"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"}